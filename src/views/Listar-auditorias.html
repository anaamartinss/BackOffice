<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Listar Auditorias</title>
  <!-- Bootstrap CSS -->
  <link rel="icon" href="/public/favicon.png" type="image/png">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="../styles/styles.css">
</head>
<body>
  <div class="d-flex">
    <!-- Sidebar -->
    <nav class="bg-dark text-white p-3" style="width: 250px; min-height: 100vh;">
      <h4 class="text-white">EyesEverywhere</h4>
      <hr class="text-white">
      <ul class="nav flex-column">
        <li class="nav-item">
          <a class="nav-link text-white" href="dashboard.html">Dashboard</a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-white" href="listar-peritos.html">Listar Peritos</a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-white" href="registar-perito.html">Registar Peritos</a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-white" href="novas-ocorrencias.html">Novas Ocorrências</a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-success" href="listar-auditorias.html">Listar Auditorias</a>
        </li>
      </ul>
      <hr class="text-white">
      <p class="text-white">EyesEverywhere</p>
    </nav>

    <!-- Main Content -->
    <div class="flex-grow-1 p-4">
      <h1 class="text-success">Listar Auditorias</h1>
      <hr class="text-success" style="height: 2px; width: 50px; margin: 0;">
      <div class="row mb-3">
        <div class="col-md-6">
          <label for="localidade" class="form-label">Localidade:</label>
          <input type="text" id="localidade" class="form-control" placeholder="Digite a localidade" oninput="filtrarTabela()">
        </div>
        <div class="col-md-6">
          <label for="estado" class="form-label">Estado:</label>
          <select id="estado" class="form-select" onchange="filtrarTabela()">
            <option value="">Escolha...</option>
            <option value="Em análise">Em análise</option>
            <option value="Concluído">Concluído</option>
          </select>
        </div>
      </div>
      <table class="table table-bordered table-hover">
        <thead class="table-success">
          <tr>
            <th>Localidade</th>
            <th>Tipo</th>
            <th>Data</th>
            <th>Estado</th>
            <th>Perito</th>
            <th>Ações</th>
          </tr>
        </thead>
        <tbody id="auditorias-table">
          <tr>
            <td>Matosinhos</td>
            <td>Poluição atmosférica</td>
            <td>Feb 28, 2025</td>
            <td>Em análise</td>
            <td>Mariana Santos</td>
            <td>
              <button class="btn btn-success btn-sm">Ver detalhes</button>
            </td>
          </tr>
          <tr>
            <td>Guimarães</td>
            <td>Inundações</td>
            <td>Feb 18, 2025</td>
            <td>Em análise</td>
            <td>Diogo Kong</td>
            <td>
              <button class="btn btn-success btn-sm">Ver detalhes</button>
            </td>
          </tr>
          <tr>
            <td>Anadia</td>
            <td>Estruturas debilitadas</td>
            <td>Jan 29, 2025</td>
            <td>Concluído</td>
            <td>Sara Pinheiro</td>
            <td>
              <button class="btn btn-success btn-sm">Ver detalhes</button>
            </td>
          </tr>
          <tr>
            <td>Bragança</td>
            <td>Desperdício de água</td>
            <td>Jan 2, 2025</td>
            <td>Concluído</td>
            <td>Mariana Santos</td>
            <td>
              <button class="btn btn-success btn-sm">Ver detalhes</button>
            </td>
          </tr>
          <tr>
            <td>Valongo</td>
            <td>Rios poluídos</td>
            <td>Feb 10, 2025</td>
            <td>Concluído</td>
            <td>Rui Veloso</td>
            <td>
              <button class="btn btn-success btn-sm">Ver detalhes</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    function filtrarTabela() {
      const localidadeInput = document.getElementById('localidade').value.toLowerCase();
      const estadoInput = document.getElementById('estado').value;
      const tabela = document.getElementById('auditorias-table');
      const linhas = tabela.getElementsByTagName('tr');

      for (let i = 0; i < linhas.length; i++) {
        const colunas = linhas[i].getElementsByTagName('td');
        const localidade = colunas[0].textContent.toLowerCase();
        const estado = colunas[3].textContent;

        if (
          (localidade.includes(localidadeInput) || localidadeInput === '') &&
          (estado === estadoInput || estadoInput === '')
        ) {
          linhas[i].style.display = '';
        } else {
          linhas[i].style.display = 'none';
        }
      }
    }
  </script>
</body>
</html>